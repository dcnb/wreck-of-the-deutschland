{% comment %}

    Side Note / Aside / Margin Note
    Creates a margin note that appears in the side margin of essay content.

    E.G. --> {% include essay/feature/aside.html text="example text" %}
    E.G. --> {% include essay/feature/aside.html objectid="demo_001" text="Additional context" %}

    Options:
    - "text" = text content for the aside, can use Markdown (optional)
    - "objectid" = objectid from the collection metadata. If provided, will display the item with appropriate formatting based on its display_template (video, image, or pdf). If no objectid is provided, only text will be displayed (optional)
    - "caption" = custom caption to override the item's title when using objectid (optional)
    - "height" = maximum height for image asides in pixels, default "205px" (optional)
    - "gallery" = set to false to link directly to item page instead of opening in spotlight viewer (optional, default true for media types)

{%- endcomment -%}<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-sticky align-top pt-2" viewBox="0 0 20 20"><path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1zM2 2.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5V8H9.5A1.5 1.5 0 0 0 8 9.5V14H2.5a.5.5 0 0 1-.5-.5zm7 11.293V9.5a.5.5 0 0 1 .5-.5h4.293z"/></svg>{% if include.objectid %}{% assign item = site.data[site.metadata] | where: 'objectid', include.objectid | first %}{% if item.image_small or item.image_thumb %}{% include essay/feature/image-aside.html %}{% else %}{% capture item_link %}{{ '/items/' | relative_url }}{% if item.parentid %}{{ item.parentid }}.html#{{ item.objectid }}{% else %}{{ item.objectid }}.html{% endif %}{% endcapture %}{% assign use_gallery = true %}{% if include.gallery == false or item.display_template == 'record' %}{% assign use_gallery = false %}{% endif %}{% assign is_media = false %}{% if item.display_template == "video" or item.display_template == "audio" or item.display_template == "pdf" %}{% assign is_media = true %}{% endif %}<span class="aside">{% if is_media and use_gallery %}<a class="spotlight gallery-img d-inline-flex align-items-center border rounded p-2 bg-light w-100" data-objectid="{{ item.objectid }}" style="text-decoration: none; cursor: pointer;" title="{{ item.title | escape }}"><span class="flex-shrink-0 text-center me-2" style="width:20%">{% include helpers/get-icon-svg.html template=item.display_template type="thumb" style="width: 3em !important;height: 3em !important;" %}</span><span class="flex-grow-1 text-dark"><span class="visually-hidden">Click to view</span>{% if include.caption %}{{ include.caption }}{% else %}{{ item.title }}{% endif %} <small>{% include feature/icon.html icon="arrows-fullscreen" label="view fullscreen" class="ms-1 mini mb-1"%}</small></span></a>{% else %}<span class="d-inline-flex align-items-center border rounded p-2 bg-light w-100"><span class="flex-shrink-0 text-center me-2" style="width:20%">{% include helpers/get-icon-svg.html template=item.display_template type="thumb" style="width: 3em !important;height: 3em !important;" %}</span><span class="flex-grow-1"><a class="fs-6 text-dark stretched-link" href="{{ item_link }}" title="link to item page">{% if include.caption %}{{ include.caption }}{% else %}{{ item.title }}{% endif %} {% include feature/icon.html icon="box-arrow-up-right" label="link to page" class="ms-1 mini mb-1"%}</a></span></span>{% endif %}{% if include.text %}<br>{{ include.text }}{% endif %}</span>{% endif %}{% else %}<span class="aside">{{ include.text }}</span>{% endif %}